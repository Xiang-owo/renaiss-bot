# Renaiss Bot é€»è¾‘é¢æ¿ ğŸ“‹

## é¡¹ç›®ç»Ÿè®¡
- **æ€»ä»£ç è¡Œæ•°**: 803 è¡Œ
- **æ ¸å¿ƒæ–‡ä»¶æ•°**: 12 ä¸ª Python æ–‡ä»¶
- **æ¶æ„**: å…­å±‚æ¨¡å—åŒ–è®¾è®¡

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
renaiss-bot-py/
â”‚
â”œâ”€â”€ main.py                 # ğŸš€ ä¸»å…¥å£ (56è¡Œ)
â”œâ”€â”€ config.py               # âš™ï¸ é…ç½®ç®¡ç† (51è¡Œ)
â”œâ”€â”€ .env                    # ğŸ”‘ ç¯å¢ƒå˜é‡ (å·²é…ç½®Token)
â”œâ”€â”€ requirements.txt        # ğŸ“¦ ä¾èµ–æ¸…å•
â”‚
â”œâ”€â”€ adapters/               # ğŸ”Œ å¤–éƒ¨æœåŠ¡é€‚é…å™¨
â”‚   â”œâ”€â”€ llm_adapter.py      # AIå¤§è„‘ (95è¡Œ)
â”‚   â””â”€â”€ renaiss_adapter.py  # Renaiss API (75è¡Œ)
â”‚
â”œâ”€â”€ core/                   # ğŸ§  æ ¸å¿ƒå¤„ç†é€»è¾‘
â”‚   â”œâ”€â”€ command_handler.py  # å‘½ä»¤å¤„ç† (80è¡Œ)
â”‚   â””â”€â”€ chat_handler.py     # èŠå¤©å¤„ç† (69è¡Œ)
â”‚
â”œâ”€â”€ services/               # ğŸ’¼ ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ card_info_service.py    # å¡ç‰ŒæŸ¥è¯¢ (91è¡Œ)
â”‚   â””â”€â”€ arbitrage_service.py    # å¥—åˆ©è®¡ç®— (55è¡Œ)
â”‚
â”œâ”€â”€ models/                 # ğŸ—„ï¸ æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ database.py         # æ•°æ®åº“å®šä¹‰ (100è¡Œ)
â”‚
â”œâ”€â”€ jobs/                   # â° åå°ä»»åŠ¡
â”‚   â””â”€â”€ scheduler.py        # å®šæ—¶è°ƒåº¦ (29è¡Œ)
â”‚
â””â”€â”€ utils/                  # ğŸ”§ å·¥å…·
    â””â”€â”€ logger.py           # æ—¥å¿—å·¥å…· (8è¡Œ)
```

---

## ğŸ”„ æ ¸å¿ƒæµç¨‹å›¾

### 1. å¯åŠ¨æµç¨‹
```
main.py å¯åŠ¨
    â†“
åˆå§‹åŒ–æ•°æ®åº“ (models/database.py)
    â†“
å¯åŠ¨å®šæ—¶ä»»åŠ¡ (jobs/scheduler.py)
    â†“
æ³¨å†Œ Telegram å‘½ä»¤å¤„ç†å™¨
    â†“
å¼€å§‹è½®è¯¢æ¶ˆæ¯
```

### 2. ç”¨æˆ·å‘é€æ¶ˆæ¯æµç¨‹
```
ç”¨æˆ·å‘é€æ¶ˆæ¯
    â†“
[æ˜¯å‘½ä»¤?] â”€æ˜¯â†’ command_handler.py å¤„ç†
    â”‚              â”œâ”€â”€ /start â†’ æ˜¾ç¤ºæ¬¢è¿+é“¾æ¥
    â”‚              â”œâ”€â”€ /help â†’ æ˜¾ç¤ºå¸®åŠ©
    â”‚              â””â”€â”€ /arbitrage â†’ æŸ¥æ‰¾å¥—åˆ©
    â”‚
    â””â”€å¦â†’ chat_handler.py å¤„ç†
              â†“
         1. æ„å›¾è¯†åˆ« (llm_adapter.py)
              â†“
         2. æ‰§è¡ŒåŠ¨ä½œ (card_info_service / arbitrage_service)
              â†“
         3. ç”Ÿæˆå›å¤ (llm_adapter.py + å°Ræ€§æ ¼)
              â†“
         è¿”å›ç»™ç”¨æˆ·
```

### 3. åå°å®šæ—¶ä»»åŠ¡æµç¨‹
```
æ¯5åˆ†é’Ÿè§¦å‘ (scheduler.py)
    â†“
è°ƒç”¨ card_info_service.refresh_all_cards()
    â†“
ä» Renaiss API è·å–æœ€æ–°æ•°æ® (renaiss_adapter.py)
    â†“
æ›´æ–°æœ¬åœ°æ•°æ®åº“ (database.py)
```

---

## ğŸ“„ å„æ–‡ä»¶è¯¦ç»†è¯´æ˜

### 1. `main.py` - ä¸»å…¥å£
```python
åŠŸèƒ½:
- åˆå§‹åŒ–æ•°æ®åº“
- å¯åŠ¨åå°è°ƒåº¦å™¨
- æ³¨å†Œ Telegram å‘½ä»¤å’Œæ¶ˆæ¯å¤„ç†å™¨
- å¯åŠ¨ Bot è½®è¯¢
```

### 2. `config.py` - é…ç½®ç®¡ç†
```python
åŒ…å«:
- TELEGRAM_TOKEN: Botä»¤ç‰Œ
- RENAISS_API_URL: APIåœ°å€
- LLM_MODEL_NAME: "gemini-2.5-flash"
- BOT_PERSONALITY: å°Rçš„æ€§æ ¼è®¾å®š
- å¤–éƒ¨é“¾æ¥: ä½œè€…æ¨ç‰¹ã€å®˜æ–¹æ¨ç‰¹ã€Discord
- MONITOR_INTERVAL_SECONDS: 300ç§’(5åˆ†é’Ÿ)
```

### 3. `adapters/llm_adapter.py` - AIå¤§è„‘
```python
åŠŸèƒ½:
- generate_response(): ç”ŸæˆèŠå¤©å›å¤
- parse_intent(): è§£æç”¨æˆ·æ„å›¾
  - query_card: æŸ¥è¯¢å¡ç‰Œ
  - compare_cards: å¯¹æ¯”å¡ç‰Œ
  - find_arbitrage: å¯»æ‰¾å¥—åˆ©
  - ask_help: è¯·æ±‚å¸®åŠ©
  - general_chat: ä¸€èˆ¬èŠå¤©
```

### 4. `adapters/renaiss_adapter.py` - Renaiss API
```python
åŠŸèƒ½:
- get_all_listed_cards(): è·å–æ‰€æœ‰åœ¨å”®å¡ç‰Œ
- _normalize_cards(): æ ‡å‡†åŒ–æ•°æ®æ ¼å¼
  - æå–: åç§°ã€ä»·æ ¼ã€è¯„çº§ã€å›¾ç‰‡ã€é“¾æ¥
```

### 5. `core/command_handler.py` - å‘½ä»¤å¤„ç†
```python
å‘½ä»¤:
- /start: æ¬¢è¿æ¶ˆæ¯ + 3ä¸ªé“¾æ¥æŒ‰é’®
- /help: ä½¿ç”¨è¯´æ˜
- /arbitrage: ä¸»åŠ¨æŸ¥æ‰¾å¥—åˆ©æœºä¼š
```

### 6. `core/chat_handler.py` - èŠå¤©å¤„ç†
```python
ä¸‰æ­¥æµç¨‹:
1. parse_intent() â†’ è¯†åˆ«ç”¨æˆ·æ„å›¾
2. _execute_action() â†’ è°ƒç”¨å¯¹åº”æœåŠ¡
3. _generate_response() â†’ ç”Ÿæˆæœ‰è¶£å›å¤
```

### 7. `services/card_info_service.py` - å¡ç‰ŒæœåŠ¡
```python
åŠŸèƒ½:
- refresh_all_cards(): åˆ·æ–°æ‰€æœ‰å¡ç‰Œæ•°æ®
- get_card_info_by_name(): æŒ‰åç§°æŸ¥è¯¢å¡ç‰Œ
```

### 8. `services/arbitrage_service.py` - å¥—åˆ©æœåŠ¡
```python
åŠŸèƒ½:
- find_opportunities(): å¯»æ‰¾å¥—åˆ©æœºä¼š
- å…¬å¼: Profit% = (FMV - Ask) / Ask Ã— 100%
- é»˜è®¤é˜ˆå€¼: 5%
```

### 9. `models/database.py` - æ•°æ®åº“
```python
è¡¨ç»“æ„:
- User: ç”¨æˆ·ä¿¡æ¯ã€è®¢é˜…çŠ¶æ€ã€é˜ˆå€¼è®¾ç½®
- Card: å¡ç‰ŒåŸºæœ¬ä¿¡æ¯
- Listing: ä»·æ ¼ä¿¡æ¯(æ”¯æŒå¤šå¹³å°)
- ArbitrageLog: å¥—åˆ©æœºä¼šè®°å½•
```

### 10. `jobs/scheduler.py` - å®šæ—¶ä»»åŠ¡
```python
åŠŸèƒ½:
- æ¯5åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°å¡ç‰Œæ•°æ®
- ä½¿ç”¨ APScheduler å¼‚æ­¥è°ƒåº¦
```

---

## ğŸ”— é‡è¦é“¾æ¥ (å·²é›†æˆ)

| é“¾æ¥ | åœ°å€ |
|------|------|
| ä½œè€…æ¨ç‰¹ | https://x.com/chen1904o |
| å®˜æ–¹æ¨ç‰¹ | https://x.com/renaissxyz |
| å®˜æ–¹Discord | https://discord.gg/renaiss |

---

## âœ… åŠŸèƒ½æ¸…å•

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| /start å‘½ä»¤ | âœ… | æ¬¢è¿æ¶ˆæ¯+é“¾æ¥æŒ‰é’® |
| /help å‘½ä»¤ | âœ… | ä½¿ç”¨è¯´æ˜ |
| /arbitrage å‘½ä»¤ | âœ… | ä¸»åŠ¨æŸ¥æ‰¾å¥—åˆ© |
| è‡ªç„¶è¯­è¨€èŠå¤© | âœ… | æ— é™å¤§è„‘ï¼Œä»»æ„èŠå¤© |
| å¡ç‰ŒæŸ¥è¯¢ | âœ… | æŒ‰åç§°æŸ¥è¯¢ |
| FMVå¥—åˆ©è®¡ç®— | âœ… | è‡ªåŠ¨è®¡ç®—åˆ©æ¶¦ |
| åå°æ•°æ®åˆ·æ–° | âœ… | æ¯5åˆ†é’Ÿ |
| å°Ræ€§æ ¼ | âœ… | æœ‰è¶£å¥½ç© |

---

## ğŸ¯ å°Ræ€§æ ¼è®¾å®š

```
30% æŸå‹ - ä¼šå¼€ç©ç¬‘ï¼Œå¶å°”åæ§½
30% ä¸“å®¶ - å¡ç‰ŒçŸ¥è¯†ä¸°å¯Œ
20% è¯ç—¨ - çƒ­æƒ…å¥è°ˆ
10% è´¢è¿· - å¯¹å¥—åˆ©æ•æ„Ÿ
10% æš–ç”· - å…³å¿ƒç”¨æˆ·
```

---

**ä»£ç å®Œæ•´ï¼Œé€»è¾‘æ¸…æ™°ï¼Œå¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼** ğŸš€
